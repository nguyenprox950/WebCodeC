{"ast":null,"code":"import { firebaseApp } from '../../components/Firebase';\nimport Swal from 'sweetalert2';\nimport { LOGIN } from '../constants/userConstants';\nexport const signUp = (values, handleSuccess) => {\n  return dispatch => {\n    firebaseApp.auth().createUserWithEmailAndPassword(values.email, values.password).then(() => {\n      Swal.fire('Chúc mừng!', 'Bạn đã đăng ký thành công!', 'success');\n      var emailID = values.email.slice(0, values.email.indexOf(\".\"));\n      firebaseApp.database().ref('userInform/' + emailID).set({\n        fullName: values.fullName,\n        birthday: values.birthday,\n        email: values.email,\n        studentID: values.studentID,\n        phoneNumber: values.phoneNumber,\n        password: values.password\n      });\n      handleSuccess();\n    });\n  };\n};\nexport const signIn = (values, handleSuccess) => {\n  return dispatch => {\n    firebaseApp.auth().signInWithEmailAndPassword(values.email, values.password).then(() => {\n      var emailID = values.email.slice(0, values.email.indexOf(\".\"));\n      firebaseApp.database().ref('userInform/' + emailID).on('value', function (snapshot) {\n        Swal.fire('Chào mừng \\n' + snapshot.val().fullName, 'Đã đăng nhập thành công!', 'success');\n        console.log(snapshot.val());\n        handleSuccess();\n        localStorage.setItem('user', JSON.stringify(snapshot.val()));\n        dispatch(signInAction(snapshot.val()));\n      });\n    }).catch(function (error) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Thất bại',\n        text: 'Tài khoản hoặc mật khẩu không đúng!'\n      });\n    });\n  };\n};\nexport const changeInform = (values, handleSuccess) => {\n  return dispatch => {\n    var emailID = values.email.slice(0, values.email.indexOf(\".\"));\n    firebaseApp.database().ref('userInform/' + emailID).set({\n      fullName: values.fullName,\n      birthday: values.birthday,\n      email: values.email,\n      studentID: values.studentID,\n      phoneNumber: values.phoneNumber,\n      password: values.password\n    });\n    firebaseApp.database().ref('userInform/' + emailID).on('value', function (snapshot) {\n      Swal.fire('Chúc mừng ', 'Bạn đã thay đổi thông tin thành công!', 'success');\n      handleSuccess();\n      localStorage.setItem('user', JSON.stringify(snapshot.val()));\n      dispatch(signInAction(snapshot.val()));\n    });\n  };\n};\nexport const changePassword = values => {\n  return dispatch => {\n    var user = firebaseApp.auth().currentUser;\n    var emailID = values.email.slice(0, values.email.indexOf(\".\"));\n    user.updatePassword(values.password2).then(function () {\n      Swal.fire('Chúc mừng ', 'Bạn đã thay đổi mật khẩu thành công!', 'success');\n      firebaseApp.database().ref('userInform/' + emailID).set({\n        fullName: values.fullName,\n        birthday: values.birthday,\n        email: values.email,\n        studentID: values.studentID,\n        phoneNumber: values.phoneNumber,\n        password: values.password2\n      });\n      firebaseApp.database().ref('userInform/' + emailID).on('value', function (snapshot) {\n        localStorage.setItem('user', JSON.stringify(snapshot.val()));\n        dispatch(signInAction(snapshot.val()));\n      });\n    }).catch(function (error) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Thất bại',\n        text: 'Không thay đổi được mật khẩu!'\n      });\n    });\n  };\n};\nexport const signInAction = data => {\n  return {\n    type: LOGIN,\n    data: data\n  };\n};","map":{"version":3,"sources":["/Users/nguyentrankhanhnguyen/Desktop/web/WebCodeC/src/redux/action/userAction.js"],"names":["firebaseApp","Swal","LOGIN","signUp","values","handleSuccess","dispatch","auth","createUserWithEmailAndPassword","email","password","then","fire","emailID","slice","indexOf","database","ref","set","fullName","birthday","studentID","phoneNumber","signIn","signInWithEmailAndPassword","on","snapshot","val","console","log","localStorage","setItem","JSON","stringify","signInAction","catch","error","icon","title","text","changeInform","changePassword","user","currentUser","updatePassword","password2","data","type"],"mappings":"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","sourcesContent":["import {firebaseApp} from '../../components/Firebase'\nimport Swal from 'sweetalert2'\nimport { LOGIN } from '../constants/userConstants'\n\nexport const signUp = (values, handleSuccess) => {\n    return dispatch => {\n        firebaseApp.auth().createUserWithEmailAndPassword(values.email, values.password)\n        .then(()=> {\n            Swal.fire(\n                'Chúc mừng!',\n                'Bạn đã đăng ký thành công!',\n                'success'\n            )\n            var emailID = values.email.slice(0, values.email.indexOf(\".\"))\n            firebaseApp.database().ref('userInform/' + emailID).set ({\n                fullName : values.fullName,\n                birthday: values.birthday, \n                email: values.email, \n                studentID: values.studentID,         \n                phoneNumber: values.phoneNumber, \n                password: values.password\n             })\n             handleSuccess()\n        })\n    }  \n}\n\nexport const signIn = (values, handleSuccess) => {\n    return dispatch => {\n        firebaseApp.auth().signInWithEmailAndPassword(values.email, values.password)\n            .then(() => {\n                var emailID = values.email.slice(0, values.email.indexOf(\".\"))\n                firebaseApp.database().ref('userInform/' + emailID).on('value', function(snapshot) {\n                    Swal.fire(\n                        'Chào mừng \\n' + snapshot.val().fullName,\n                        'Đã đăng nhập thành công!',\n                        'success'\n                    )\n                    console.log(snapshot.val())\n                    handleSuccess()\n                    localStorage.setItem('user', JSON.stringify(snapshot.val()))\n                    dispatch(signInAction(snapshot.val()))\n                })\n            })\n            .catch(function(error) {\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Thất bại',\n                    text: 'Tài khoản hoặc mật khẩu không đúng!',\n                })\n            })\n    }\n}\n\nexport const changeInform = (values, handleSuccess) => {\n    return dispatch => {\n        var emailID = values.email.slice(0, values.email.indexOf(\".\"))\n        firebaseApp.database().ref('userInform/' + emailID).set ({\n            fullName : values.fullName,\n            birthday: values.birthday, \n            email: values.email, \n            studentID: values.studentID,         \n            phoneNumber: values.phoneNumber, \n            password: values.password\n        })\n        firebaseApp.database().ref('userInform/' + emailID).on('value', function(snapshot) {\n            Swal.fire(\n                'Chúc mừng ',\n                'Bạn đã thay đổi thông tin thành công!',\n                'success'\n            )\n            handleSuccess()\n            localStorage.setItem('user', JSON.stringify(snapshot.val()))\n            dispatch(signInAction(snapshot.val()))\n        })\n    }  \n}\n\nexport const changePassword = (values) => {\n    return dispatch => {\n        var user = firebaseApp.auth().currentUser;\n        var emailID = values.email.slice(0, values.email.indexOf(\".\"))\n\n        user.updatePassword(values.password2).then(function() {\n            Swal.fire(\n                'Chúc mừng ',\n                'Bạn đã thay đổi mật khẩu thành công!',\n                'success'\n            )\n            firebaseApp.database().ref('userInform/' + emailID).set ({\n                fullName : values.fullName,\n                birthday: values.birthday, \n                email: values.email, \n                studentID: values.studentID,         \n                phoneNumber: values.phoneNumber, \n                password: values.password2\n            })\n            firebaseApp.database().ref('userInform/' + emailID).on('value', function(snapshot) {\n                localStorage.setItem('user', JSON.stringify(snapshot.val()))\n                dispatch(signInAction(snapshot.val()))\n            })\n        }).catch(function(error) {\n            Swal.fire({\n                icon: 'error',\n                title: 'Thất bại',\n                text: 'Không thay đổi được mật khẩu!',\n            })\n        });\n    }\n}\n\nexport const signInAction = (data) => {\n    return {\n        type: LOGIN,\n        data: data\n    }\n}"]},"metadata":{},"sourceType":"module"}